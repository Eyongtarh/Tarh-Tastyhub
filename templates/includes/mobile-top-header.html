{% load static %}
{% load dishes_extras %}

<!-- Mobile Header -->
<div class="d-lg-none bg-white sticky-top shadow-sm">
  <div class="d-flex justify-content-between align-items-center px-3 py-2">
    <!-- Logo -->
    <a href="{% url 'home' %}" class="brand-logo text-decoration-none">
      <i class="fa-solid fa-utensils brand-icon"></i>
      <span class="brand-accent">Tarh</span>
      <span class="brand-main">Tastyhub</span>
    </a>
    <div class="d-flex align-items-center gap-2">
      <!-- Mobile Bag Count -->
      <a href="{% url 'bag' %}" class="position-relative text-dark">
        <i class="fa-solid fa-shopping-bag fs-5"></i>
        <span id="bag-count-mobile" class="bag-count position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark text-warning">{{ bag_count|default:'0' }}</span>
      </a>

      <!-- Hamburger Menu Button -->
      <button class="btn btn-hamburger" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu" aria-label="Toggle menu"><i class="fa-solid fa-bars"></i></button>
    </div>
  </div>
</div>

<!-- Mobile Offcanvas Menu -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title fw-bold" id="mobileMenuLabel">Menu</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body p-3">
    <ul class="list-unstyled mb-0">
      <!-- Home -->
      <li>
        <a href="{% url 'home' %}" class="text-decoration-none d-block py-1">Home</a>
      </li>

      <!-- Categories -->
      <li class="mt-2">
        <strong>Dishes</strong>
        {% if categories %}
          <ul class="ps-3 mb-0">
            {% for category in categories %}
              <li>
                <a href="{% url 'dish_list_by_category' category.slug %}" class="text-decoration-none d-block py-1">{{ category.name }}</a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted small ps-1 mb-0">No categories available</p>
        {% endif %}
      </li>

      <!-- Other Pages -->
      <li class="mt-2">
        <a href="{% url 'dish_list' %}" class="text-decoration-none d-block py-1">Browse Dishes</a>
      </li>
      <li>
        <a href="{% url 'checkout' %}" class="text-decoration-none d-block py-1">Checkout</a>
      </li>
      <li>
        <a href="{% url 'feedback' %}" class="text-decoration-none d-block py-1">Contact</a>
      </li>

      <!-- Authentication Links -->
      {% if user.is_authenticated %}
        {% if user.is_superuser %}
          <li class="mt-2">
            <a href="{% url 'admin_dashboard' %}" class="text-decoration-none d-block py-1">Admin Dashboard</a>
          </li>
        {% endif %}
        <li>
          <a href="{% url 'profile' %}" class="text-decoration-none d-block py-1">Profile</a>
        </li>
        <li>
          <a href="{% url 'account_logout' %}" class="text-decoration-none d-block py-1">Logout</a>
        </li>
      {% else %}
        <li class="mt-2">
          <a href="{% url 'account_login' %}" class="text-decoration-none d-block py-1">Login</a>
        </li>
      {% endif %}
    </ul>
  </div>
</div>
